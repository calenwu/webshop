async function applyCoupon(e,t=!1){const a=e.getElementsByClassName("rounded-l")[0].value,n=e.getElementsByClassName("rounded-l")[0].previousElementSibling.value,r=e.getElementsByClassName("rounded-l")[0].parentElement.previousElementSibling,l=new FormData,s=document.getElementsByClassName("couponForm");return Array.from(s).forEach(e=>{const t=e.getElementsByClassName("rounded-r")[0];t.disabled=!0,t.innerHTML='<i class="fal fa-sync"></i>',t.firstElementChild.classList.add("spinning")}),l.append("csrfmiddlewaretoken",n),l.append("code",a),await fetch(couponApplyUrl,{method:"POST",body:l}).then(e=>e.json()).then(e=>{if(Array.from(s).forEach(e=>{e.getElementsByClassName("rounded-r")[0].firstElementChild.classList.remove("spinning")}),(e=e.data).success)t&&location.reload(),Array.from(s).forEach(e=>{e.getElementsByClassName("rounded-l")[0].value=""}),getCart();else{r.classList.remove("hidden");var a=document.getElementsByClassName("collapsible");for(let e=0;e<a.length;e++)a[e].click(),a[e].click()}}).catch(e=>{createFancyAlert("error",errorString,e.toString()),getCart()}),Array.from(s).forEach(e=>{const t=e.getElementsByClassName("rounded-r")[0];t.innerHTML='<i class="fal fa-check"></i>',t.disabled=!1}),!1}async function removeCoupon(e=!1){return await fetch(couponRemoveUrl,{method:"POST"}).then(e=>e.json()).then(t=>{if((t=t.data).success)e&&location.reload(),getCart();else{warning.classList.remove("hidden");var a=document.getElementsByClassName("collapsible");for(let e=0;e<a.length;e++)a[e].click(),a[e].click()}}).catch(e=>{createFancyAlert("error",errorString,e.toString()),getCart()}),!1}